<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head runat="server">
    <title>setTimeout</title>
    <style>
        
    </style>
  </head>
  <body>
    
      <!-- <div id="d1"></div> -->
      
      <div class="clock">
        <p id="date" class="date">12:00:00</p>
        <p id="time" class="time">12:00:00</p>
      </div>
  </body>
</html>

<script>

  var cTime1 = new Date(); //月份是0~11
//   console.log(cTime1);
  var cTime2 = new Date("2020-09-13T23:59:59"); //ISO8601表示法 沒有毫秒
//   console.log(cTime2);


    // 處理時間變化
    
    function runtime(){

        time = new Date();

        time.getFullYear(); //西元年
        time.getMonth(); //月 0~11
        time.getDay(); //日
        time.getDate(); //星期
        time.getHours(); //小時
        time.getMinutes(); //分
        time.getSeconds(); //秒
        time.getMilliseconds();//毫秒
        
        J=time.getMilliseconds();

        var beto = cTime2.getTime() - time.getTime();
        var beto = Math.floor(beto / 1000);

        var X = Math.floor(beto / 86400);
        // console.log(X + "天");
        var Y = Math.floor((beto % 86400) / 3600);
        // console.log(Y + "時");
        var Z = Math.floor(((beto % 86400) % 3600) / 60);
        // console.log(Z + "分");
        var K = (Math.floor(beto % 86400) % 3600) % 60;
        // console.log(K + "秒");
        // var J = (Math.floor(beto % 86400) % 3600) % 60/1000;
        document.getElementById("date").textContent=X;
        document.getElementById("time").textContent=`${Y}:${Z}:${K}:${J}`;
    }
 


//   設定倒數秒數
  

  //顯示倒數秒收
  function showTime() {
    time = new Date();

    time.getFullYear(); //西元年
    time.getMonth(); //月 0~11
    time.getDay(); //日
    time.getDate(); //星期
    time.getHours(); //小時
    time.getMinutes(); //分
    time.getSeconds(); //秒
    time.getTime();

    var beto = cTime2.getTime() - time.getTime();
    var beto = Math.floor(beto / 1000);
    beto -= 1;
    // document.getElementById("d1").innerHTML = beto;

    if (beto == 0) {
      location.href = "https://wdaweb.github.io/";
    }

    //每秒執行一次,showTime()
    setTimeout("showTime()", 1000);
    
  }
  

  //執行showTime()
  showTime();
   // 預先執行載入
   runtime();
    // 重複載入
    setInterval(runtime,1);
</script>
