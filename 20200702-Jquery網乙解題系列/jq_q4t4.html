<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第四題.t4</title>
        <!-- jQuery -->
<script src="jquery-3.5.1.min.js"></script>
<style>
    a{
        display:block;
        width:200px;
        text-align: center;
        margin: 10px auto;
        background: lightblue;
        padding: 20px 5px;
        text-decoration: none;
    }
    .son{
        background:lightseagreen;
    }
</style>
</head>
<body>
    <div class="menu">
        <!-- <a href="#">全部商品</a>
        <a href="#" id="fa1" class="fa">流行皮件(3)</a>
            <a href="#" class="fa1 son">男用皮件(3)</a>
            <a href="#" class="fa1 son">女用皮件(0)</a>

        <a href="#" id="fa2" class="fa">流行皮件(2)</a>
            <a href="#" class="fa2 son">少女鞋區(1)</a>
            <a href="#" class="fa2 son">紳士流行鞋區(1)</a>

        <a href="#" id="fa3" class="fa">流行飾品(1)</a>
            <a href="#" class="fa3 son">時尚手錶(0)</a>
            <a href="#" class="fa3 son">時尚珠寶(1)</a>

        <a href="#" id="fa4" class="fa">背包(2)</a>
            <a href="#" class="fa4 son">背包(2)</a> -->
    </div>
    
</body>
<script>
    $.getJSON("data.json",result=>todo(result.q4t4))

    function todo(jsn){
        // console.log(jsn);
        // 全部商品的計算
        let total=0;
        for (const fa of jsn) {
            // console.log(fa);
            // 主目錄的計算，每跑完一次son 就讓faNum歸零
            let faNum=0, print="";
            for (const son of fa.sub) {
                // $(".menu").append(`<a href="#"  class="fa${fa.id}">${son.title}(${son.count})</a>`);     //將子目錄先隱藏起來
                print+=`<a href="#"  class="fa${fa.id} son">${son.title}(${son.count})</a>`;
                faNum+=son.count;
                // 可以放裡面加總
                // total+-son.count;
            }
            // 也可以放外面加總
            total+=faNum;
            $(".menu").append(`<a href="#" id="fa${fa.id}" class="fa">${fa.title}(${faNum})</a>${print}`);
            // $(".menu").append(print);
            //print son's menu
        }
        $(".menu").prepend(`<a href="#">全部商品(${total})</a>`); 

        $(".son").hide();
        $(".fa").mouseover(function(){
            node=$(this).attr("id");
            $(".son").not("."+node).slideUp('fast');   //不是選的地方
            $("."+node).slideDown();
        });

    }
</script>
</html>