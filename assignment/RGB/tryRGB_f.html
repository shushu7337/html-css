<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>tryRGB.html</title>
    <!-- bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <!-- JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <!-- font -->
    <link href="https://fonts.googleapis.com/css2?family=Iceland&display=swap" rel="stylesheet">
    <style>
      body{
        background: #3E4C59;
        font-family: 'Iceland', cursive;
        height: 100vh;
      }
      .here {
        text-align: center;
        width: 100%;
      }
      .bln {
        margin-top: 5%;
        text-align: center;
      }
      .bbt {
        text-align: center;
      }
      #vidtop-content {
        top: 0;
        color: #fff;
        margin: 0 auto;
      }
      .vid-info {
        width: 100%;
        
      }
      .vid-info h1 {
        font-size: 8em;
        font-weight: 700;
        margin-top: 0;
      }
      .outside{
        margin: auto;
        margin-top: 5%;
      }
    /* rgb h1 position */
     .sh1{
       margin-left: 20%;
     }
     .sh2{
       margin-left: 30%;
     }
     .bc{
      width: 50px;
      height: 50px;
      border-radius: 50px;
    }

    #plu ,#min {
      width: 50px;
      height: 50px;
      border-radius: 50px;
      margin: 20px 10px;
    }
     

    </style>
  </head>
  <body>
    
        <div id="vidtop-content" >
          <div class="vid-info">
                <h1 class="sh1">RGB</h1>
                <h1 class="sh2">selector</h1>
          </div>
        </div>
            <div class="outside">
              <div id="rgb" class="here" style="background: rgb(100, 100, 100);"></div>
              <div class="bln">
                <button id="RR" class="bc btn btn-outline-info">R</button>
                <input
                  id="Rr" type="range" min="0" max="255" onmousemove="inrange(this)"/>
                <button id="GG" class="bc btn btn-outline-info">G</button>
                <input
                  id="Gr" type="range" min="0" max="255" onmousemove="inrange(this)"/>
                <button id="BB" class="bc btn btn-outline-info">B</button>
                <input
                  id="Br" type="range" min="0" max="255" onmousemove="inrange(this)"/>
              </div>
              <div class="bbt">
                <button id="plu" class="btn btn-outline-info btn-lg">+</button>
                <button id="min" class="btn btn-outline-info btn-lg">-</button>
                <button id="ran" class="btn btn-outline-info btn-lg">random</button>
              </div>
            </div>

    <script>
      //取得div 及R G B各別三鍵的值以變數宣告
      let rgb = document.getElementById("rgb");
      let btnR = document.getElementById("RR");
      let btnG = document.getElementById("GG");
      let btnB = document.getElementById("BB");
      // 三鍵以listener監聽行為
      btnR.addEventListener("click", crolor);
      btnG.addEventListener("click", cgolor);
      btnB.addEventListener("click", cbolor);

      // 將三鍵的值以亂數顯示
      btnR = Math.floor(Math.random() * 256);
      btnG = Math.floor(Math.random() * 256);
      btnB = Math.floor(Math.random() * 256);

      // 呼叫隨機顯色函式
      rColor();

      // 讓RGB拉桿取得現有隨機色的數值
      // rgb.style.background="rgb("+btnR+","+btnG+","+btnB+")";
      document.getElementById("Rr").value = btnR;
      document.getElementById("Gr").value = btnG;
      document.getElementById("Br").value = btnB;

      // 宣告連續按鈕
      var pp1 = document.getElementById("plu");
      var mm1 = document.getElementById("min");
      var rr1 = document.getElementById("ran");
      /////////////////連續增加/////////////////
      pp1.onmousedown = function (plus) {
        go = setInterval(function () {
          if (btnR < 255) btnR++;
          if (btnG < 255) btnG++;
          if (btnB < 255) btnB++;
          rgb.style.background = "rgb(" + btnR + "," + btnG + "," + btnB + ")";
          document.getElementById("Rr").value = btnR;
          document.getElementById("Gr").value = btnG;
          document.getElementById("Br").value = btnB;
          rgbtohex();
        }, 10);
      };
      pp1.onmouseup = function (plus) {
        clearInterval(go);
      };
      /////////////////連續減少/////////////////
      mm1.onmousedown = function (plus) {
        go = setInterval(function () {
          if (btnR > 0) btnR--;
          if (btnG > 0) btnG--;
          if (btnB > 0) btnB--;
          rgb.style.background = "rgb(" + btnR + "," + btnG + "," + btnB + ")";
          document.getElementById("Rr").value = btnR;
          document.getElementById("Gr").value = btnG;
          document.getElementById("Br").value = btnB;
          rgbtohex();
        }, 10);
      };
      mm1.onmouseup = function (plus) {
        clearInterval(go);
      };

      /////////////////連續隨機/////////////////
      rr1.onmousedown = function (plus) {
        go = setInterval(function () {
          btnR = Math.floor(Math.random() * 256);
          btnG = Math.floor(Math.random() * 256);
          btnB = Math.floor(Math.random() * 256);
          rColor();
          rgb.style.background = "rgb(" + btnR + "," + btnG + "," + btnB + ")";
          document.getElementById("Rr").value = btnR;
          document.getElementById("Gr").value = btnG;
          document.getElementById("Br").value = btnB;
          rgbtohex();
        }, 10);
      };
      rr1.onmouseup = function (plus) {
        clearInterval(go);
      };

      /////////////////印出文字/////////////////
      rgbtohex();
      function rgbtohex() {
        rgb.style.color =
          "rgb(" + (255 - btnR) + "," + (255 - btnG) + "," + (255 - btnB) + ")";
        rgb.style.fontSize = "50px";
        
        SR = Number(btnR).toString(16);
        SG = Number(btnG).toString(16);
        SB = Number(btnB).toString(16);
        if (SR.length < 2) {
          SR = "0" + SR;
        }
        if (SG.length < 2) {
          SG = "0" + SG;
        }
        if (SB.length < 2) {
          SB = "0" + SB;
        }
        rgb.innerHTML = `#${SR}${SG}${SB}`;
      }

      //隨機出色
      function rColor() {
        rgb.style.background = "rgb(" + btnR + "," + btnG + "," + btnB + ")";
        rgbtohex();
        return "rgb(" + btnR + "," + btnG + "," + btnB + ")";
      }

      //R鍵改色
      function crolor() {
        RR = prompt("請輸入R數值", "0~255");
        if (RR < 0 || 256 < RR) {
          alert("請重新輸入");
          return crolor();
        } else {
          btnR = RR;
          rgb.style.background = "rgb(" + btnR + "," + btnG + "," + btnB + ")";
          document.getElementById("Rr").value = btnR;
          rgbtohex();
        }
      }
      //G鍵改色
      function cgolor() {
        GG = prompt("請輸入G數值", "0~255");
        if (GG < 0 || 256 < GG) {
          alert("請重新輸入");
          return color();
        } else {
          btnG = GG;
          rgb.style.background = "rgb(" + btnR + "," + btnG + "," + btnB + ")";
          document.getElementById("Gr").value = btnG;
          rgbtohex();
        }
      }
      //B鍵改色
      function cbolor() {
        BB = prompt("請輸入B數值", "0~255");
        if (BB < 0 || 256 < BB) {
          alert("請重新輸入");
          return color();
        } else {
          btnB = BB;
          rgb.style.background = "rgb(" + btnR + "," + btnG + "," + btnB + ")";
          document.getElementById("Br").value = btnB;
          rgbtohex();
        }
      }

      // 拉桿調色
      function inrange(labar) {
        switch (labar.id) {
          case "Rr":
            btnR = labar.value;
            rgb.style.background =
              "rgb(" + btnR + "," + btnG + "," + btnB + ")";
            rgbtohex();
            break;
          case "Gr":
            btnG = labar.value;
            rgb.style.background =
              "rgb(" + btnR + "," + btnG + "," + btnB + ")";
            rgbtohex();
            break;
          case "Br":
            btnB = labar.value;
            rgb.style.background =
              "rgb(" + btnR + "," + btnG + "," + btnB + ")";
            rgbtohex();
            break;
        }
      }
      function checkcc(te) {
        console.log("HEX:" + te.toString(16));
      }
    </script>
  </body>
</html>
